<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="team.ftg.resumegen.dao.NewresumeDao">

    <!-- 自定义结果集 -->
    <resultMap type="Basic_Info" id="basicResultMap">
        <id property="basic_id" column="basic_id" />
        <result property="name" column="name" />
        <result property="gender" column="gender" />
        <result property="age" column="age" />
        <result property="nation" column="nation" />
        <result property="city" column="city" />
        <result property="tel" column="tel" />
        <result property="email" column="email" />
        <result property="school" column="school" />
        <result property="major" column="major" />
        <result property="education" column="education" />
    </resultMap>
    <resultMap type="Intent_Info" id="intentResultMap">
        <id property="intent_id" column="intent_id" />
        <result property="position" column="position" />
        <result property="job_type" column="job_type" />
        <result property="work_city" column="work_city" />
        <result property="salary" column="salary" />
    </resultMap>
    <resultMap type="Exp_Info" id="expResultMap">
        <id property="exp_id" column="exp_id" />
        <result property="edu_exp" column="edu_exp" />
        <result property="project_exp" column="project_exp" />
    </resultMap>
    <resultMap type="Intro_Info" id="introResultMap">
        <id property="intro_id" column="intro_id" />
        <result property="introduce" column="introduce" />
    </resultMap>

    <!--插入基本信息-->
    <insert id="insertBasicInfo" parameterType="Basic_Info"  useGeneratedKeys="true" keyProperty="basic_id">
       insert
        into basic_info(name,gender,age,nation,city,tel,email,school,major,education,user_id)
        values(#{name},#{gender},#{age},#{nation},#{city},#{tel},#{email},#{school},#{major},#{education},#{user_id})
    </insert>
    <!-- 插入求职意向信息 -->
    <insert id="insertIntentInfo" parameterType="Intent_Info"  useGeneratedKeys="true" keyProperty="intent_id">
       insert
        into intent_info(position,job_type,work_city,salary,user_id)
        values(#{position},#{job_type},#{work_city},#{salary},#{user_id})
    </insert>
    <!-- 插入教育/项目经历信息 -->
    <insert id="insertExperienceInfo" parameterType="Exp_Info"  useGeneratedKeys="true" keyProperty="exp_id">
       insert
        into exp_info(edu_exp,project_exp,user_id)
        values(#{edu_exp},#{project_exp},#{user_id})
    </insert>
    <!-- 插入自我介绍 -->
    <insert id="insertIntroduceInfo" parameterType="Intro_Info"  >
       insert
        into intro_info(introduce,user_id)
        values(#{introduce},#{user_id})
    </insert>

    <!-- 查询基础信息 -->
    <select id="getBasicInfo" parameterType="Basic_Info" resultMap="basicResultMap">
        select *
        from basic_info where user_id=#{user_id}
    </select>
    <!-- 查询求职意向信息 -->
    <select id="getIntentInfo" parameterType="Intent_Info" resultMap="intentResultMap">
        select *
        from intent_info where user_id=#{user_id}
    </select>
    <!-- 查询教育/项目经历信息 -->
    <select id="getExperienceInfo" parameterType="Exp_Info" resultMap="expResultMap">
        select *
        from exp_info where user_id=#{user_id}
    </select>
    <!-- 查询自我评价 -->
    <select id="getIntroduceInfo" parameterType="Intro_Info" resultMap="introResultMap">
        select *
        from intro_info where user_id=#{user_id}
    </select>


</mapper>