<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="team.ftg.resumegen.dao.NewresumeDao">

    <!--插入基本信息-->
    <insert id="insertBasicInfo" parameterType="Basic_Info"  useGeneratedKeys="true" keyProperty="basic_id">
       insert
        into basic_info(name,gender,age,nation,city,tel,email,school,major,education,user_id)
        values(#{name},#{gender},#{age},#{nation},#{city},#{tel},#{email},#{school},#{major},#{education},#{userId})
    </insert>
    <!-- 插入求职意向信息 -->
    <insert id="insertIntentInfo" parameterType="Intent_Info"  useGeneratedKeys="true" keyProperty="intent_id">
       insert
        into intent_info(position,job_type,work_city,salary,user_id)
        values(#{position},#{jobType},#{workCity},#{salary},#{userId})
    </insert>
    <!-- 插入教育/项目经历信息 -->
    <insert id="insertExperienceInfo" parameterType="Exp_Info"  useGeneratedKeys="true" keyProperty="exp_id">
       insert
        into exp_info(edu_exp,project_exp,user_id)
        values(#{eduExp},#{projectExp},#{userId})
    </insert>
    <!-- 插入自我介绍 -->
    <insert id="insertIntroduceInfo" parameterType="Intro_Info"  >
       insert
        into intro_info(introduce,user_id)
        values(#{introduce},#{userId})
    </insert>

    <!-- 查询基础信息 -->
    <select id="getBasicInfo" parameterType="int" resultType="Basic_info">
        select *
        from basic_info where user_id=#{user_id}
    </select>
    <!-- 查询求职意向信息 -->
    <select id="getIntentInfo" parameterType="int" resultType="Intent_info">
        select *
        from intent_info where user_id=#{user_id}
    </select>
    <!-- 查询教育/项目经历信息 -->
    <select id="getExperienceInfo" parameterType="int" resultType="Exp_Info">
        select *
        from exp_info where user_id=#{user_id}
    </select>
    <!-- 查询自我评价 -->
    <select id="getIntroduceInfo" parameterType="int" resultType="Intro_Info">
        select *
        from intro_info where user_id=#{user_id}
    </select>

    <!-- 查询基本信息是否已经填写过 -->
    <select id="checkStatus" parameterType="int" resultType="Basic_info">
        select *
        from basic_info where user_id=#{user_id}
    </select>


</mapper>