<html>
<head>
    <meta content="text/html; charset=utf-8">
    <title>Title</title>
    <script type="text/javascript" src="../static/js/jquery-3.3.1.js"></script>

    <script src="../static/js/template-web.js"></script>

    <script>

        function requestJson() {
            $.ajax({
                    type: 'POST',

                    contentType: 'application/json; charset=utf-8',

                    url: '/FrameworkTest/TestController/JsonTest',

                    dataType: 'json',

                    data: '{"username":"Jasmine","password":"1"}',

                    success: function (data) {
                        // alert(data.username + "***" + data.password + "***" + data.address);
                        document.getElementById('myP1').innerHTML = data.length;

                        //var json = eval(data);
                        $.each(data, function (index) {
                            //循环获取数据
                            alert(data[index].username);
                            //var html = template(document.getElementById('tpl').innerHTML, json[index]);

                        });
                        console.log("*******8*****" + data);

                        document.getElementById('myP2').innerHTML = data;
                        console.log("*******7*****" + data);

                        // function testFunc(datum) {
                        //     document.getElementById('myP3').innerHTML = datum.username;
                        //
                        // }
                        //
                        // testFunc(data[1]);
                        // for (var i = 0; i < data.length; i++){

                        var html = template(document.getElementById('tpl').innerHTML, data[1].toJSON);
                        alert('exeD!');
                        document.getElementById('myP3').innerHTML += html;
                        //}


                    },

                    error: function (data) {
                        alert("fail!");
                    }

                }
            )
        }
    </script>
</head>
<body>
<input type="button" onclick="requestJson()" value="request Json"/>
<div id="myDiv">
    <p id="myP1">place holder.</p>
    <p id="myP2">place holder.</p>
    <p id="myP3">place holder.</p>
    <script id="tpl" type="text/html">
        <ul>
            <li>
                name:<%=username%> age:<%=age%>
            </li>

        </ul>
    </script>

</div>
</body>
</html>